import"./modulepreload-polyfill.b7f2da20.js";/* empty css              */import*as t from"pixi.js";const r=document.querySelector("video"),l=document.querySelector("canvas"),m={video:{width:r.clientWidth,height:r.clientHeight},audio:!1},p=async e=>{try{return await navigator.mediaDevices.getUserMedia(e)}catch{alert("\u30C7\u30D0\u30A4\u30B9\u3092\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F")}},u=async()=>{try{return await navigator.mediaDevices.enumerateDevices()}catch{return[]}},v=async()=>{const i=(await u()).filter(a=>a.kind==="videoinput"),c=(a,n)=>`<label><input name="camera" type="radio" value=${a.toString()} />${n.toString()}</label><br />`,s=document.querySelector(".input_wrapper"),o=i.reduce((a,n)=>a+c(n.deviceId,n.label),"");s.innerHTML=o,s.querySelectorAll("input").forEach(a=>{a.addEventListener("change",n=>{h(n.target.value)})})},h=async e=>{const i=await p({video:{width:r.clientWidth,height:r.clientHeight,deviceId:e}});r.srcObject=await i};let d;const g=()=>{d=new t.Application({view:l});const e=t.Sprite.from(r);e.width=l.width,e.height=l.height,d.stage.addChild(e)},w=()=>{const e=new t.filters.NoiseFilter(.5,.2),i=new t.filters.ColorMatrixFilter;i.greyscale(.2);const c=t.Sprite.from("../assets/noise.png");c.texture.baseTexture.wrapMode=t.WRAP_MODES.REPEAT;const s=new t.filters.DisplacementFilter(c),o=new t.filters.BlurFilter(4);d.stage.filters=[i,s,o,e]};document.addEventListener("DOMContentLoaded",async()=>{const e=await p(m);r.srcObject=await e,await v(),g(),w()});
